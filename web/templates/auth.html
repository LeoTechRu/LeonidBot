{% extends "auth_base.html" %}
{% block title %}–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ‚Äî LeonidPro{% endblock %}
{% block content %}
  <nav class="auth-tabs" role="tablist">
    <a href="#" class="tab {% if active == 'login' %}is-active{% endif %}" data-target="login-form">–í—Ö–æ–¥</a>
    <a href="#" class="tab {% if active == 'register' %}is-active{% endif %}" data-target="register-form">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
  </nav>

  <form id="login-form" action="/auth/login" method="post" class="auth-form{% if active != 'login' %} hidden{% endif %}" novalidate>
    {{ csrf_input|safe if csrf_input is defined }}
    <label class="field">
      <span class="label">Username</span>
      <input class="control" type="text" name="username" autocomplete="username" required placeholder="–í–∞—à –ª–æ–≥–∏–Ω">
    </label>

    <label class="field">
      <span class="label">–ü–∞—Ä–æ–ª—å</span>
      <div class="control-with-action">
        <input class="control" type="password" name="password" autocomplete="current-password" required placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
        <button type="button" class="link tiny toggle-password" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å">üëÅ</button>
      </div>
    </label>

    <label class="checkbox">
      <input type="checkbox" name="remember_me" value="1">
      <span>–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è</span>
      <a class="link small right" href="/restore">–Ω–∞–ø–æ–º–Ω–∏—Ç—å</a>
    </label>

    <button class="btn primary full" type="submit">–í–æ–π—Ç–∏</button>

    <div class="or">–∏–ª–∏</div>

    <a class="btn telegram full" href="{{ telegram_login_url or '/login/telegram' }}">
      <svg class="icon"><use href="#i-paper-plane"/></svg>
      –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Telegram
    </a>

    {% if social_login %}
    <div class="social-row">
      <a class="social vk"   href="/oauth/vk"   aria-label="VK"></a>
      <a class="social fb"   href="/oauth/fb"   aria-label="Facebook"></a>
      <a class="social ok"   href="/oauth/ok"   aria-label="OK"></a>
      <a class="social google" href="/oauth/google" aria-label="Google"></a>
    </div>
    {% endif %}

    {% if flash %}
      <div class="auth-alert">{{ flash }}</div>
    {% endif %}
  </form>

  <form id="register-form" action="/auth/register" method="post" class="auth-form{% if active != 'register' %} hidden{% endif %}" novalidate>
    {{ csrf_input|safe if csrf_input is defined }}

    <label class="field">
      <span class="label">Email</span>
      <input class="control" type="email" name="email" autocomplete="email" required placeholder="–í–≤–µ–¥–∏—Ç–µ Email">
    </label>

    <label class="field">
      <span class="label">–ü–∞—Ä–æ–ª—å</span>
      <div class="control-with-action">
        <input class="control" type="password" name="password" autocomplete="new-password" required placeholder="–°–æ–∑–¥–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å">
        <button type="button" class="link tiny toggle-password" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å">üëÅ</button>
      </div>
    </label>

    <label class="field">
      <span class="label">–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å</span>
      <input class="control" type="password" name="password2" autocomplete="new-password" required placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
    </label>

    <button class="btn primary full" type="submit">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>

    <div class="or">–∏–ª–∏</div>

    <a class="btn telegram full" href="{{ telegram_login_url or '/login/telegram' }}">
      <svg class="icon"><use href="#i-paper-plane"/></svg>
      –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —á–µ—Ä–µ–∑ Telegram
    </a>
  </form>

  <script>
    const tabs = document.querySelectorAll('.auth-tabs .tab');
    const loginForm = document.getElementById('login-form');
    const registerForm = document.getElementById('register-form');
    tabs.forEach(tab => {
      tab.addEventListener('click', (e) => {
        e.preventDefault();
        tabs.forEach(t => t.classList.remove('is-active'));
        tab.classList.add('is-active');
        if (tab.dataset.target === 'login-form') {
          loginForm.classList.remove('hidden');
          registerForm.classList.add('hidden');
        } else {
          registerForm.classList.remove('hidden');
          loginForm.classList.add('hidden');
        }
      });
    });
  </script>
{% endblock %}

