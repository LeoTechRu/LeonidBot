{% extends "auth_base.html" %}
{% block title %}–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ‚Äî LeonidPro{% endblock %}
{% block head_scripts %}
  {% if RECAPTCHA_SITE_KEY %}
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
  {% endif %}
{% endblock %}
{% block content %}
  <nav class="auth-tabs" role="tablist">
    <a href="#login"     class="tab is-active" data-tab="login"     role="tab" aria-selected="true">–í—Ö–æ–¥</a>
    <a href="#register"  class="tab"           data-tab="register"  role="tab" aria-selected="false">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
    <a href="#restore"   class="tab"           data-tab="restore"   role="tab" aria-selected="false">–ù–∞–ø–æ–º–Ω–∏—Ç—å</a>
  </nav>

  <section class="auth-forms">

    <!-- LOGIN -->
    <form action="/login" method="post" class="auth-form form-login" data-validate="login" novalidate>
      {{ csrf_input|safe if csrf_input is defined }}
      <label class="field">
        <span class="label">Username</span>
        <input class="control" type="text" name="username" autocomplete="username" required placeholder="–í–∞—à –ª–æ–≥–∏–Ω">
        <div class="error-text" data-for="username"></div>
      </label>

      <label class="field">
        <span class="label">–ü–∞—Ä–æ–ª—å</span>
        <div class="control-with-action">
          <input class="control" type="password" name="password" autocomplete="current-password" required placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
          <button type="button" class="link tiny toggle-password" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å">üëÅ</button>
        </div>
        <div class="error-text" data-for="password"></div>
      </label>

      <label class="checkbox">
        <input type="checkbox" name="remember_me" value="1">
        <span>–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è</span>
        <a class="link small right" href="#restore" data-tab-jump="restore">–Ω–∞–ø–æ–º–Ω–∏—Ç—å</a>
      </label>

      <button class="btn primary full" type="submit">–í–æ–π—Ç–∏</button>

      <div class="or">–∏–ª–∏</div>

      {% if TG_LOGIN_ENABLED %}
        <div class="tg-login">
          <script async src="https://telegram.org/js/telegram-widget.js?22"
                  data-telegram-login="{{ TG_BOT_USERNAME or 'LeonidBot' }}"
                  data-size="large"
                  data-userpic="false"
                  data-request-access="write"
                  data-auth-url="/auth/telegram"
                  data-lang="ru"></script>
          <div class="muted small">–ï—Å–ª–∏ –≤–∏–¥–∂–µ—Ç –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è ‚Äî <a class="link" target="_blank" rel="noopener" href="https://t.me/{{ (TG_BOT_USERNAME or 'LeonidBot')|replace('@','') }}?start=login">–æ—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram</a>.</div>
        </div>
      {% endif %}

      {% if flash %}
        <div class="auth-alert">{{ flash }}</div>
      {% endif %}
    </form>

    <!-- REGISTER -->
    <form action="/register" method="post" class="auth-form form-register is-hidden" data-validate="register" novalidate>
      {{ csrf_input|safe if csrf_input is defined }}

      <label class="field">
        <span class="label">Email</span>
        <input class="control" type="email" name="email" autocomplete="email" required placeholder="–í–≤–µ–¥–∏—Ç–µ Email">
        <div class="error-text" data-for="email"></div>
      </label>

      <label class="field">
        <span class="label">–ü–∞—Ä–æ–ª—å</span>
        <div class="control-with-action">
          <input class="control" type="password" name="password" autocomplete="new-password" required placeholder="–°–æ–∑–¥–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å">
          <button type="button" class="link tiny toggle-password" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å">üëÅ</button>
        </div>
        <div class="error-text" data-for="password"></div>
      </label>

      <label class="field">
        <span class="label">–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å</span>
        <input class="control" type="password" name="password2" autocomplete="new-password" required placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
        <div class="error-text" data-for="password2"></div>
      </label>

      <button class="btn primary full" type="submit">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
    </form>

    <!-- RESTORE -->
    <form action="/restore" method="post" class="auth-form form-restore is-hidden" data-validate="restore" novalidate>
      {{ csrf_input|safe if csrf_input is defined }}
      <input type="hidden" name="form_ts" value="{{ now_ts }}">
      <div class="hp-wrap" aria-hidden="true"><input type="text" name="hp_url" tabindex="-1" autocomplete="off"></div>

      <label class="field">
        <span class="label">Email</span>
        <input class="control" type="email" name="email" required placeholder="–í–≤–µ–¥–∏—Ç–µ Email">
        <div class="error-text" data-for="email"></div>
      </label>

      <button class="btn primary full" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É</button>
      <p class="muted small" style="margin-top:10px">–ú—ã –ø—Ä–∏—à–ª—ë–º –ø–∏—Å—å–º–æ —Å–æ —Å—Å—ã–ª–∫–æ–π –¥–ª—è —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è (–µ—Å–ª–∏ —Ç–∞–∫–æ–π –∞–∫–∫–∞—É–Ω—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç).</p>
    </form>

  </section>
{% endblock %}

