{% set header_user = (current_user if current_user is defined else user) if (current_user is defined or user is defined) else None %}
{% set header_role = (current_role_name if current_role_name is defined else role_name) if (current_role_name is defined or role_name is defined) else '' %}
<header class="top-bar">
    <div class="top-left">
        <a href="/" class="logo">ü¶Å</a>
        <a href="/" class="project-name">LeonidBot</a>
    </div>
    <div class="top-center">
        <h2 class="page-title">{{ page_title }}</h2>
    </div>
    <div class="top-right">
        {% if header_user %}
            {% if is_admin %}
            <div class="admin-menu"><a href="/admin">–ê–¥–º–∏–Ω</a></div>
            {% endif %}
            <div class="profile-menu">
                <div id="profile-button" class="profile-icon role-{{ header_role|lower }}">üë§</div>
                <div id="profile-dropdown" class="dropdown-menu hidden">
                    <div class="role">–†–æ–ª—å: {{ header_role }}</div>
                    <a href="/profile/{{ header_user.telegram_id }}">–ü—Ä–æ—Ñ–∏–ª—å</a>
                    <a href="/settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
                    <a href="/auth/logout" data-method="post">–í—ã–π—Ç–∏</a>
                </div>
            </div>
        {% else %}
            <nav class="guest-menu">
                <a href="/auth/login">–í—Ö–æ–¥</a>
                <a href="/auth/register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
            </nav>
        {% endif %}
    </div>
</header>
